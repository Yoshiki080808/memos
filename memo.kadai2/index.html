<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Colorful Post it</title>
<script src="js/jquery-2.1.3.min.js"></script>
<script src="js/jquery-ui.min.js"></script>
<link rel="stylesheet" href="css/sample.css">
</head>
<body>
<header>
<h1>Colorful Post it!</h1>
</header>
<main>
    <div id="controller">
        <input type="button" id="add-button" value="追加"><!-- 追加ボタン -->
    </div>
    <div id="sticky-note-container">
      <!-- ここにポストイットたちが入っていく -->
    </div>
</main>

<table id="list">
<!-- ここに追加データが挿入される -->
</table>

<script>

// 1.付箋作り。追加ボタンを押すと、付箋っぽいdiv要素が表示される
// inputを使ってテキストボックスを表示する関数を作る（省力できるけど）
// function getNewNote() {
//     return  '<div class="note">' + 
//             '<input type="text">' +
//             '<input class="delete-button" type="button" value="削除">' +
//             '</div>';
// }
// 次に変数noteに上記のinputを入れ込む、そんでcontainerに付箋表示(普通のテキスト)
// $('#add-button').on('click', function(){
//     let note = getNewNote();
//     $('#sticky-note-container').append(note);
// });

// 2.付箋をドラッグ＆ドロップできるようにする
// $('#add-button').on('click', function(){
//     let $note = $(getNewNote());
//     $note.draggable();
//     $('#sticky-note-container').append($note);
// });

// ３.付箋を削除
// $('#add-button').on('click', function(){
//     var $note = $(getNewNote());
//     $note.draggable();
//     $note.children(".delete-button")
//         .on('click', function() {
//             $(this).parents('.note').remove();
//     });
//     $('#sticky-note-container').append($note);
// });

// 4.次に、色を変えてみる
function getNewNote() {
    return  '<div class="note">' + 
            '<input type="text">' +
            '<input class="delete-button" type="button" value="削除">' +
            '<input data-color="#F390B0" class="color-button" type="button" value="赤">' +
            '<input data-color="#65B5F5" class="color-button" type="button" value="青">' +
            '<input data-color="#FFE082" class="color-button" type="button" value="黄">' +
            '</div>';
}

function appendFunctions($note) {
    $note.draggable();

    $note.children(".delete-button").on('click', function() {
        $(this).parents('.note').remove();
    });

    $note.children(".color-button").on('click', function() {
        const color = $(this).data('color');
        $(this).parents('.note').css('background-color', color);
  });
}

$('#add-button').on('click', function(){
    var $note = $(getNewNote());
    appendFunctions($note);

    $('#sticky-note-container').append($note);
});
</script>
<footer><small>G's</small></footer>
</body>
</html>